{"ast":null,"code":"var _jsxFileName = \"/Users/hubertkowal/Documents/FilmTrackerApp/film-tracker-frontend/src/controller/FilmList.js\",\n  _s = $RefreshSig$();\n// src/components/FilmList.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport FilmForm from './FilmForm';\nimport ReactPaginate from 'react-paginate';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FilmList = () => {\n  _s();\n  const [films, setFilms] = useState([]);\n  const [editingFilm, setEditingFilm] = useState(null);\n  const [pageCount, setPageCount] = useState(0);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [searchQuery, setSearchQuery] = useState('');\n  useEffect(() => {\n    fetchFilms(currentPage, searchQuery);\n  }, [currentPage, searchQuery]);\n  const fetchFilms = async (page, query) => {\n    try {\n      const response = await axios.get('/films', {\n        params: {\n          page: page + 1,\n          // Backend expects 1-based index for pagination\n          search: query\n        }\n      });\n      setFilms(response.data.content || response.data); // Fallback if no content is returned\n      setPageCount(response.data.totalPages);\n    } catch (error) {\n      console.error('There was an error fetching films:', error);\n    }\n  };\n  const handleEdit = film => {\n    setEditingFilm(film);\n  };\n  const handleDelete = async id => {\n    try {\n      await axios.delete(`/films/${id}`);\n      fetchFilms(currentPage, searchQuery); // Refresh list after delete\n    } catch (error) {\n      console.error('There was an error deleting the film:', error);\n    }\n  };\n  const handleSaveFilm = async (id, formData) => {\n    try {\n      if (id) {\n        // Update film\n        await axios.put(`/films/${id}`, formData);\n      } else {\n        // Add new film\n        await axios.post('/films', formData);\n      }\n      fetchFilms(currentPage, searchQuery);\n      setEditingFilm(null); // Close form after saving\n    } catch (error) {\n      console.error('There was an error saving the film:', error);\n    }\n  };\n  const handleSearch = e => {\n    setSearchQuery(e.target.value);\n    setCurrentPage(0); // Reset to first page on search\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Film Tracker\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Search Films\",\n      value: searchQuery,\n      onChange: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FilmForm, {\n      film: editingFilm,\n      onSave: handleSaveFilm,\n      isEditing: !!editingFilm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: films.map(film => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [film.name, \" (\", new Date(film.releaseDate).toLocaleDateString(), \") - \", film.genre, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleEdit(film),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(film._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)]\n      }, film._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ReactPaginate, {\n      previousLabel: \"Previous\",\n      nextLabel: \"Next\",\n      breakLabel: \"...\",\n      pageCount: pageCount,\n      onPageChange: ({\n        selected\n      }) => setCurrentPage(selected),\n      containerClassName: \"pagination\",\n      activeClassName: \"active\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n_s(FilmList, \"9XD3RTSRiMVWM7BPFYfCM5zMUkE=\");\n_c = FilmList;\nexport default FilmList;\nvar _c;\n$RefreshReg$(_c, \"FilmList\");","map":{"version":3,"names":["React","useState","useEffect","axios","FilmForm","ReactPaginate","jsxDEV","_jsxDEV","FilmList","_s","films","setFilms","editingFilm","setEditingFilm","pageCount","setPageCount","currentPage","setCurrentPage","searchQuery","setSearchQuery","fetchFilms","page","query","response","get","params","search","data","content","totalPages","error","console","handleEdit","film","handleDelete","id","delete","handleSaveFilm","formData","put","post","handleSearch","e","target","value","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onSave","isEditing","map","name","Date","releaseDate","toLocaleDateString","genre","onClick","_id","previousLabel","nextLabel","breakLabel","onPageChange","selected","containerClassName","activeClassName","_c","$RefreshReg$"],"sources":["/Users/hubertkowal/Documents/FilmTrackerApp/film-tracker-frontend/src/controller/FilmList.js"],"sourcesContent":["// src/components/FilmList.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport FilmForm from './FilmForm';\nimport ReactPaginate from 'react-paginate';\n\nconst FilmList = () => {\n    const [films, setFilms] = useState([]);\n    const [editingFilm, setEditingFilm] = useState(null);\n    const [pageCount, setPageCount] = useState(0);\n    const [currentPage, setCurrentPage] = useState(0);\n    const [searchQuery, setSearchQuery] = useState('');\n\n    useEffect(() => {\n        fetchFilms(currentPage, searchQuery);\n    }, [currentPage, searchQuery]);\n\n    const fetchFilms = async (page, query) => {\n        try {\n            const response = await axios.get('/films', {\n                params: {\n                    page: page + 1, // Backend expects 1-based index for pagination\n                    search: query,\n                },\n            });\n            setFilms(response.data.content || response.data); // Fallback if no content is returned\n            setPageCount(response.data.totalPages);\n        } catch (error) {\n            console.error('There was an error fetching films:', error);\n        }\n    };\n\n    const handleEdit = (film) => {\n        setEditingFilm(film);\n    };\n\n    const handleDelete = async (id) => {\n        try {\n            await axios.delete(`/films/${id}`);\n            fetchFilms(currentPage, searchQuery); // Refresh list after delete\n        } catch (error) {\n            console.error('There was an error deleting the film:', error);\n        }\n    };\n\n    const handleSaveFilm = async (id, formData) => {\n        try {\n            if (id) {\n                // Update film\n                await axios.put(`/films/${id}`, formData);\n            } else {\n                // Add new film\n                await axios.post('/films', formData);\n            }\n            fetchFilms(currentPage, searchQuery);\n            setEditingFilm(null); // Close form after saving\n        } catch (error) {\n            console.error('There was an error saving the film:', error);\n        }\n    };\n\n    const handleSearch = (e) => {\n        setSearchQuery(e.target.value);\n        setCurrentPage(0); // Reset to first page on search\n    };\n\n    return (\n        <div>\n            <h1>Film Tracker</h1>\n\n            <input\n                type=\"text\"\n                placeholder=\"Search Films\"\n                value={searchQuery}\n                onChange={handleSearch}\n            />\n\n            <FilmForm\n                film={editingFilm}\n                onSave={handleSaveFilm}\n                isEditing={!!editingFilm}\n            />\n\n            <ul>\n                {films.map((film) => (\n                    <li key={film._id}>\n                        {film.name} ({new Date(film.releaseDate).toLocaleDateString()}) - {film.genre}\n                        <button onClick={() => handleEdit(film)}>Edit</button>\n                        <button onClick={() => handleDelete(film._id)}>Delete</button>\n                    </li>\n                ))}\n            </ul>\n\n            <ReactPaginate\n                previousLabel={\"Previous\"}\n                nextLabel={\"Next\"}\n                breakLabel={\"...\"}\n                pageCount={pageCount}\n                onPageChange={({ selected }) => setCurrentPage(selected)}\n                containerClassName={\"pagination\"}\n                activeClassName={\"active\"}\n            />\n        </div>\n    );\n};\n\nexport default FilmList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}